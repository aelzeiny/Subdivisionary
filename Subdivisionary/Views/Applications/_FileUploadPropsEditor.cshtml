@using Microsoft.Ajax.Utilities
@using Subdivisionary.Helpers
@model Subdivisionary.ViewModels.FileUploadViewModel
@{
    var mTypes = new List<string>(Model.UploadList.Count);
    foreach (var upload in Model.UploadList)
    {
        if (upload.Type == "application/pdf")
        {
            mTypes.Add("pdf");
        }
        else
        {
            mTypes.Add(upload.Type.Substring(0, upload.Type.IndexOf('\\')-1));
        }
    }
}
<div class="form-group">
    <label class="control-label" for=@Model.UploadProperty.UniqueKey>@Model.LabelMessage</label>
    <!--uploadUrl: up.data("callback"),
    maxFileSize: up.data("maxFileSize"),
    maxFileCount: up.data("maxFileCount"),
    allowedFileExtensions: up.data("extensions").split(",")-->
    <input id="@Model.UploadProperty.UniqueKey" type="file" name="@Model.UploadProperty.UniqueKey"
    class="file-loading" multiple="@(!Model.UploadProperty.IsSingleUpload)"
    data-callback="@Url.Action("UploadFiles", "Applications", new { id = Model.UploadProperty.FormId })"
    data-maxFileCount ="@Model.UploadProperty.MaxFileCount"
    data-maxFileSize="@Model.UploadProperty.MaxFileSize"
    data-extensions ="@string.Join(",", Model.UploadProperty.Extensions)"
    data-files ="@string.Join(",", Model.UploadList.Select(x => x.Url))"
    data-captions ="@Model.UploadProperty.UniqueKey"
    data-sizes ="@string.Join(",", Model.UploadList.Select(x => x.Size))"
    data-urls ="@string.Join(",", Model.UploadList.Select(x => Url.Action("DeleteFile", "Applications",
               new{
                   formId = Model.UploadProperty.FormId,
                   uniqueKey = Model.UploadProperty.UniqueKey,
                   fileUrl = x.Url
               })))"
    data-types ="@string.Join(",", mTypes)">

    <ul class="list-group">
        @foreach (var file in Model.UploadList)
        {
            <li class="list-group-item list-group-item-info file-upload-list">
                <div style="text-align: center">
                    <i class="fa fa-download" aria-hidden="true"></i>
                    @Html.ActionLink("Download " + System.IO.Path.GetFileName(file.Url), "Download", new { file = file })
                </div>
            </li>
        }
    </ul>
</div>
